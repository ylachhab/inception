version: '3.8'

services:
    nginx:
      build: ./requirements/nginx
      image: nginx:ylachhab
      container_name: nginx
      ports:
      -  "443:443"
      depends_on:
      -  wordpress
      volumes:
      - wordpress_data:/var/www/html
      networks:
      -  inception
      restart: on-failure
    mariadb:
      build: ./requirements/mariadb
      image: mariadb:ylachhab
      container_name: mariadb
      restart: on-failure
      volumes:
      - mariadb_data:/var/lib/mysql
      networks:
      -  inception
      expose:
      -  "3306"
    wordpress:
      build: ./requirements/wordpress
      image: wordpress:ylachhab
      container_name: wordpress
      volumes:
      - wordpress_data:/var/www/html
      restart: on-failure
      networks:
      -  inception

networks:
  inception:
    driver: bridge

volumes:
  mariadb_data:
  wordpress_data:
  #  db:
  #   driver: local
  #   driver_opts:
  #     type: none
  #     o: bind
  #     device: $HOME/data/db
  # wordpress:
  #   driver: local
  #   driver_opts:
  #     type: none
  #     o: bind
  #     device: $HOME/data/wordpress